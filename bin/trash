#!/usr/bin/env bash
set -o nounset

if [[ $# == 0 || $1 == -* ]]; then
  printf "Usage:\n\ttrash <file> [<file>..]\n"
  exit 0
fi

for loc in "$@"; do
  # Check if location exists.
  if [[ ! -f "$loc" && ! -d "$loc" ]]; then
    printf "Location '$loc' does not exist.\n"
    continue;
  fi

  ABS_LOC=$(cd $(dirname "$loc"); pwd)/$(basename "$loc")

  error=$(mv "$ABS_LOC" "$HOME/.Trash/" 2>&1)
  if [[ $? -ne 0 ]]; then
    echo "Could not trash '$ABS_LOC'."
    echo -e "\t$error"
  else
    echo "Trashed '$ABS_LOC'."
  fi
done
